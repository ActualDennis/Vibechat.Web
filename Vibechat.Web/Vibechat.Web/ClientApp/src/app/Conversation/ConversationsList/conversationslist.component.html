<mat-action-list class="conversations_wrapper_conversations">
  <h3 mat-subheader>Conversations</h3>

  <mat-list-item *ngFor="let conversation of Conversations"
                 (click)="ChangeConversation(conversation)"
                 [ngClass]="{'selected-conversation': IsCurrentConversation(conversation)}">

    <img matListAvatar *ngIf="conversation.isGroup; else dialogue" src="{{conversation.thumbnailUrl}}" alt="Conversation logo">

    <ng-template #dialogue>
      <img matListAvatar src="{{conversation.dialogueUser.imageUrl}}" alt="Dialogue logo">
    </ng-template>

    <h3 matLine
        *ngIf="conversation.isGroup; else dialogueHeader"
        [ngClass]="{'selected-conversation': IsCurrentConversation(conversation)}"> {{conversation.name}} </h3>

    <ng-template #dialogueHeader>
      <h3 matLine
          [ngClass]="{'selected-conversation': IsCurrentConversation(conversation)}"> {{conversation.dialogueUser.userName}} </h3>
    </ng-template>

    <div matLine class="lastmessage_content">
      <span class="lastmessage_content_lastmessage" [ngClass]="{'selected-conversation': IsCurrentConversation(conversation)}">
        {{formatter.GetLastMessageFormatted(conversation)}}
      </span>
      <span class="lastmessage_content_lastmessageDate" [ngClass]="{'selected-conversation': IsCurrentConversation(conversation)}">
        {{formatter.GetLastMessageDateFormatted(conversation)}}
      </span>

      <div *ngIf="conversation.messagesUnread" class="unread_bubble">
        <span class="unread_bubble_text">{{formatter.GetMessagesUnreadFormatted(conversation.messagesUnread)}}</span>
      </div>
    </div>
  </mat-list-item>

</mat-action-list>

<style>

  .unread_bubble{
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    border-radius: 15px;
    background-color: #436f70;
  }

  .unread_bubble_text{
    color: white;
  }

</style>
