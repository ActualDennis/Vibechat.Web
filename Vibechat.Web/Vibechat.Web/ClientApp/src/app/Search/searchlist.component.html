<div class="searchlist">

  <mat-action-list>
    <mat-list-item *ngFor="let conversation of FoundLocalConversations"
                   (click)="ViewLocalConversation(conversation)">

      <img matListAvatar *ngIf="conversation.isGroup; else dialogue" src="{{conversation.thumbnailUrl}}" alt="Conversation logo">

      <ng-template #dialogue>
        <img matListAvatar src="{{conversation.dialogueUser.imageUrl}}" alt="Dialogue logo">
      </ng-template>

      <h3 matLine
          *ngIf="conversation.isGroup; else dialogueHeader">
        {{conversation.name}}
      </h3>

      <ng-template #dialogueHeader>
        <h3 matLine>
          {{conversation.dialogueUser.userName}}
        </h3>
      </ng-template>

    </mat-list-item>
  </mat-action-list>




  <mat-action-list class="searchlist_conversations">
    <h3 mat-subheader>Global search</h3>

    <mat-progress-spinner *ngIf="IsSearchingForGroups"
                          class="load-spinner"
                          diameter="40"
                          color="Primary"
                          mode="indeterminate">
    </mat-progress-spinner>

    <h3 mat-subheader>Conversations</h3>

    <mat-list-item *ngFor="let conversation of GlobalConversations"
                   (click)="ViewConversation(conversation)">

      <img matListAvatar src="{{conversation.thumbnailUrl}}" alt="Conversation logo">

      <h3 matLine>
        {{conversation.name}}
      </h3>
    </mat-list-item>

  </mat-action-list>

  <mat-action-list class="searchlist_users">
    <h3 mat-subheader>Users</h3>

    <mat-progress-spinner *ngIf="IsSearchingForUsers"
                          class="load-spinner"
                          diameter="40"
                          color="Primary"
                          mode="indeterminate">
    </mat-progress-spinner>

    <mat-list-item *ngFor="let user of Users"
                   (click)="ViewUser(user)">

      <img matListAvatar src="{{user.imageUrl}}" alt="Conversation logo">

      <div *ngIf="user.name != null" matLine class="flexrow">
        <span>{{user.name}}</span>
        <span *ngIf="user.lastName != null" class="user_lastname">{{user.lastName}}</span>
      </div>

      <h3 matLine class="username">
        {{user.userName}}
      </h3>
    </mat-list-item>

  </mat-action-list>

</div>

<style>
  .searchlist{
    display:flex;
    flex-direction: column;
    overflow-y:scroll;
  }
  .flexrow{
    display:flex;
    flex-direction:row;
  }
  .username{
    color:dimgray;
  }
  .user_lastname{
    margin-left: 5px;
  }
</style>
