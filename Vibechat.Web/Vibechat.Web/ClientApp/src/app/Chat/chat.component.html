<mat-card class="chat_wrapper">

  <mat-drawer-container [hasBackdrop]="true">

    <!--Actions-->

    <mat-drawer #actionsdrawer [mode]="over">
      <div class="chatactions_flex">

        <button mat-button>
          <div class="padding10px flexaligned">
            <mat-icon>sentiment_satisfied</mat-icon>
            <span class="padding5px">My profile</span>
          </div>
        </button>

        <button mat-button (click)="CreateGroup()">
          <div class="padding10px flexaligned">
            <mat-icon>people</mat-icon>
            <span class="padding5px">Create a group</span>
          </div>
        </button>


        <button mat-button (click)="OnLogOut()">
          <div class="padding10px flexaligned">
            <mat-icon>cancel</mat-icon>
            <span class="padding5px">Log out</span>
          </div>
        </button>
      </div>
    </mat-drawer>

    <mat-drawer-content>

      <mat-card-content *ngIf="IsAuthenticated" class="chat_wrapper_content">

        <div class="conversations_wrapper">
          <div class="conversations_wrapper_searchbar">

            <button mat-button (click)="actionsdrawer.toggle()">
              <mat-icon>more_vert</mat-icon>
            </button>

            <mat-form-field style="margin-left: 20%;" appearance="fill">
              <mat-label>Search</mat-label>
              <input matInput placeholder="Search..." type="search" [(ngModel)]="SearchString" (keydown.enter)="Search()" >
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
          </div>

          <searchlist-view *ngIf="SearchString != null && SearchString !== ''"
                           [LocalConversations]="Conversations"
                           (OnViewUser)="OnViewUserInfo($event)"
                           (OnViewConversation)="OnViewGroupInfo($event)"
                           (OnViewLocalConversation)="ChangeConversation($event)"
                           (OnApiError)="OnApiError($event)"
                           (OnError)="OnError($event)"
                           [SearchString]="SearchString">

          </searchlist-view>

          <conversationslist-view *ngIf="SearchString == null || SearchString === ''"
                                  [CurrentConversation]="CurrentConversation"
                                  class="conversations_wrapper_conversations"
                                  [Conversations]="Conversations"
                                  (OnSelectedConversationChanged)="ChangeConversation($event)">

          </conversationslist-view>

        </div>

        <div *ngIf="IsConversationSelected()" class="messages_wrapper">

          <conversationHeader-view class="messages_wrapper_header"
                                   (OnViewGroupInfo)="OnViewGroupInfo(CurrentConversation)"
                                   [Conversation]="CurrentConversation"></conversationHeader-view>

          <messages-view class="messages_wrapper_messages"
                         (OnUpdateMessages)="OnUpdateMessages()"
                         (OnDeleteMessages)="OnDeleteMessages($event)"
                         [Conversation]="CurrentConversation"
                         [MessagesLoading]="IsMessagesLoading"></messages-view>


          <input-view class="messages_wrapper_input"
                      [User]="CurrentUser"
                      [Conversation]="CurrentConversation"
                      (OnSendMessage)="OnSendMessage($event)"
                      (OnUploadImages)="OnUploadImages($event)"></input-view>

        </div>

      </mat-card-content>

    </mat-drawer-content>
  </mat-drawer-container>

  <img *ngIf="! IsAuthenticated" src="/Assets/401.jpg" />
</mat-card>
